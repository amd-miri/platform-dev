<?php

/**
 * @file
 * Integration Layer plugin for NextEuropa.
 */

/**
 * Collect and return list of producer definitions.
 *
 * @return array
 *    List of producer definitions.
 */
function nexteuropa_integration_producer_info_producers() {
  $producers = module_invoke_all('nexteuropa_integration_producer_info');
  drupal_alter('nexteuropa_integration_producer_info', $producers);
  return $producers;
}

/**
 * Implements hook_nexteuropa_integration_producer_info().
 */
function nexteuropa_integration_nexteuropa_integration_producer_info() {
  return array(
    'node' => array(
      'class' => '\Drupal\nexteuropa_integration\Producer\NodeProducer',
    ),
    'taxonomy_term' => array(
      'class' => '\Drupal\nexteuropa_integration\Producer\TaxonomyTermProducer',
    ),
  );
}

/**
 * Collect and return list of producer field handler definitions.
 *
 * @return array
 *    List of producer field handler definitions.
 */
function nexteuropa_integration_producer_info_field_handlers() {
  $field_handlers = module_invoke_all('nexteuropa_integration_producer_field_handler_info');
  drupal_alter('nexteuropa_integration_producer_field_handler_info', $field_handlers);
  return $field_handlers;
}

/**
 * Implements hook_nexteuropa_integration_producer_info().
 */
function nexteuropa_integration_nexteuropa_integration_producer_field_handler_info() {
  $field_handlers = array();
  $defaults = array('alter' => TRUE);

  $field_handlers['default'] = array(
    'class' => '\Drupal\nexteuropa_integration\Producer\FieldHandlers\DefaultFieldHandler',
  ) + $defaults;

  $field_handlers['text']
    = $field_handlers['text_long'] = array(
      'class' => '\Drupal\nexteuropa_integration\Producer\FieldHandlers\TextFieldHandler',
    ) + $defaults;

  $field_handlers['text_with_summary'] = array(
    'class' => '\Drupal\nexteuropa_integration\Producer\FieldHandlers\TextWithSummaryFieldHandler',
  ) + $defaults;

  $field_handlers['date']
    = $field_handlers['datetime']
      = $field_handlers['datestamp'] = array(
        'class' => '\Drupal\nexteuropa_integration\Producer\FieldHandlers\DateFieldHandler',
      ) + $defaults;

  $field_handlers['file']
    = $field_handlers['image'] = array(
      'class' => '\Drupal\nexteuropa_integration\Producer\FieldHandlers\FileFieldHandler',
    ) + $defaults;

  return $field_handlers;
}
